<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>从输入网址到页面呈现这个过程中都发生了什么？</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="white"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-title" content="我的博客"><meta name="description" content="专注前端开发，前端开发技术博客"><meta name="keywords" content="前端开发，PHP开发，Javascript，前端开发博客"><link rel="dns-prefetch" href="www.jesse131.cn"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="shortcut icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">从输入网址到页面呈现这个过程中都发生了什么？</h1><a id="logo" href="/.">前端之路</a><p class="description">路漫漫其修远兮，吾将上下而求索</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索..."></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">从输入网址到页面呈现这个过程中都发生了什么？</h1><div class="post-meta"><span class="date">2016-12-23</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i> Hits</i></i></span><a href="/articles/web/从输入网址到页面呈现这个过程中都发生了什么.html#comments" class="comment-count"></a></div><div class="post-content"><p>在前端开发中我们常常需要考虑首屏加载时间，为了尽可能减少首屏加载时间我们需要弄清楚从输入网址到页面最终呈现的过程中都发生了哪些事情，然后才能具体问题具体分析，最终达到提升网页性能的目的。从输入网址到页面呈现过程中都发生了什么？据说这是一个非常经典的面试题，考察的问题面也很广，今天我就从一个前端开发工程师的角度来解答一下这个问题，文中难免有些知识点介绍的不够深，还望见谅！<br><a id="more"></a><br>从输入网址到页面呈现这个过程大致可分为以下这几个部分：</p>
<ol>
<li>网络通信</li>
<li>页面渲染</li>
</ol>
<h2 id="网络通信"><a href="#网络通信" class="headerlink" title="网络通信"></a>网络通信</h2><h3 id="输入网址"><a href="#输入网址" class="headerlink" title="输入网址"></a>输入网址</h3><p>当我们在浏览器的地址栏输入网址例如(<code>http://www.baidu.com</code>)，<code>http://</code>代表使用超文本传输协议，<code>www.baidu.com</code>代表服务器地址，<code>baidu.com</code>代表域名。一个完整的URL包括协议、服务器地址(主机)、端口、路径</p>
<h3 id="负责域名查询与解析的DNS服务"><a href="#负责域名查询与解析的DNS服务" class="headerlink" title="负责域名查询与解析的DNS服务"></a>负责域名查询与解析的DNS服务</h3><p>用户通常使用主机名或域名来访问某网站，而不是直接通过IP来访问，因为字母数字配合的表示形式更符合人类的记忆习惯，可计算机却不理解这些名称，因此DNS服务应运而生，DNS协议提供通过域名查找IP地址，或逆向从IP地址反查域名的服务。<br>DNS查询过程如下：</p>
<ol>
<li>操作系统会先检查本地的hosts文件是否有这个网址映射关系，如果有，就先调用这个IP地址映射，完成域名解析。 </li>
<li>如果hosts里没有这个域名的映射，则查找本地DNS解析器缓存，是否有这个网址映射关系，如果有，直接返回，完成域名解析。 </li>
<li>如果hosts与本地DNS解析器缓存都没有相应的网址映射关系，首先会找TCP/IP参数中设置的首选DNS服务器，在此我们叫它本地DNS服务器，此服务器收到查询时，如果要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析，此解析具有权威性。 </li>
<li>如果要查询的域名，不由本地DNS服务器区域解析，但该服务器已缓存了此网址映射关系，则调用这个IP地址映射，完成域名解析，此解析不具有权威性。</li>
<li>如果本地DNS服务器本地区域文件与缓存解析都失效，则根据本地DNS服务器的设置（是否设置转发器）进行查询，如果未用转发模式，本地DNS就把请求发至13台根DNS，根DNS服务器收到请求后会判断这个域名(.com)是谁来授权管理，并会返回一个负责该顶级域名服务器的一个IP。本地DNS服务器收到IP信息后，将会联系负责.com域的这台服务器。这台负责.com域的服务器收到请求后，如果自己无法解析，它就会找一个管理.com域的下一级DNS服务器地址(baidu.com)给本地DNS服务器。当本地DNS服务器收到这个地址后，就会找baidu.com域服务器，重复上面的动作，进行查询，直至找到www.baidu.com主机。 </li>
<li>如果用的是转发模式，此DNS服务器就会把请求转发至上一级DNS服务器，由上一级服务器进行解析，上一级服务器如果不能解析，或找根DNS或把转请求转至上上级，以此循环。不管是本地DNS服务器用是是转发，还是根提示，最后都是把结果返回给本地DNS服务器，由此DNS服务器再返回给客户机。 </li>
</ol>
<p>从客户端到本地DNS服务器是属于递归查询，而DNS服务器之间就是的交互查询就是迭代查询。</p>
<h3 id="应用层-客户端发送HTTP请求报文"><a href="#应用层-客户端发送HTTP请求报文" class="headerlink" title="应用层 客户端发送HTTP请求报文"></a>应用层 客户端发送HTTP请求报文</h3><p>HTTP报文包括：</p>
<ul>
<li>报文首部 （请求行+各种首部字段+其他）</li>
<li>空行</li>
<li>报文主体 （应被发送的数据）通常并不一定要有报文主体</li>
</ul>
<p>下面对百度首页请求报文首部进行分析：<br><strong>请求行</strong><br><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">请求方法<span class="builtin-name">GET</span> 请求URI /   HTTP协议版本 1.1</span><br><span class="line"><span class="builtin-name">GET</span> / HTTP/1.1</span><br></pre></td></tr></table></figure></p>
<p><strong>首部字段</strong><br><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">请求资源所在服务器</span></span><br><span class="line"><span class="attr">Host:</span> <span class="string">www.baidu.com</span></span><br><span class="line"><span class="string">连接方式：持久连接</span>     <span class="string">HTTP/1.1之前版本默认非持久连接</span></span><br><span class="line"><span class="attr">Connection:</span> <span class="string">keep-alive</span></span><br><span class="line"><span class="string">报文指令：要求所有中间服务器不返回缓存资源</span></span><br><span class="line"><span class="attr">Pragma:</span> <span class="literal">no</span><span class="bullet">-cache</span></span><br><span class="line"><span class="string">控制缓存的行为：缓存前必须先确认其有效性，防止从缓存中返回过期的资源</span></span><br><span class="line"><span class="attr">Cache-Control:</span> <span class="literal">no</span><span class="bullet">-cache</span></span><br><span class="line"><span class="string">用户代理可处理的媒体类型</span></span><br><span class="line"><span class="attr">Accept:</span> <span class="string">text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span>   <span class="string">q表示权重从而区分优先级</span></span><br><span class="line"><span class="string">http客户端浏览器信息</span></span><br><span class="line"><span class="attr">User-Agent:</span> <span class="string">Mozilla/5.0</span> <span class="string">(Windows</span> <span class="string">NT</span> <span class="number">6.1</span><span class="string">)</span> <span class="string">AppleWebKit/537.36</span> <span class="string">(KHTML,</span> <span class="string">like</span> <span class="string">Gecko)</span> <span class="string">Chrome/49.0.2623.87</span> <span class="string">Safari/537.36</span></span><br><span class="line"><span class="string">可接受的内容编码类型</span></span><br><span class="line"><span class="attr">Accept-Encoding:</span> <span class="string">gzip,</span> <span class="string">deflate,</span> <span class="string">sdch</span></span><br><span class="line"><span class="string">可接受的语言</span></span><br><span class="line"><span class="attr">Accept-Language:</span> <span class="string">zh-CN,zh;q=0.8</span></span><br><span class="line"><span class="string">相关信息或标记</span></span><br><span class="line"><span class="attr">Cookie:</span> <span class="string">BAIDUID=3C67AA3EF6B3347D3AA986CE489268C4:FG=1;</span> <span class="string">BIDUPSID=3C67AA3EF6B3347D3AA986CE489268C4;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="传输层-确保传输报文可靠性的TCP协议"><a href="#传输层-确保传输报文可靠性的TCP协议" class="headerlink" title="传输层 确保传输报文可靠性的TCP协议"></a>传输层 确保传输报文可靠性的TCP协议</h3><p>位于传输层的TCP协议为传输报文提供可靠的字节流服务。为了方便传输，将大块的数据分割成以报文段为单位的数据包进行管理，并为它们编号，方便服务器接收时能准确地还原报文信息。TCP协议通过“三次握手”等方法保证传输的安全可靠。<br>“三次握手”的过程是，发送端先发送一个带有SYN（synchronize）标志的数据包给接收端，在一定的延迟时间内等待接收的回复。接收端收到数据包后，传回一个带有SYN/ACK标志的数据包以示传达确认信息。接收方收到后再发送一个带有ACK标志的数据包给接收端以示握手成功。在这个过程中，如果发送端在规定延迟时间内没有收到回复则默认接收方没有收到请求，而再次发送，直到收到回复为止。<br>详细过程如下图<br><img src="http://o8l2fza1x.bkt.clouddn.com/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png" alt="三次握手"></p>
<h3 id="网络层-负责传输的IP协议"><a href="#网络层-负责传输的IP协议" class="headerlink" title="网络层 负责传输的IP协议"></a>网络层 负责传输的IP协议</h3><p>IP协议的作用是把TCP分割好的各种数据包传送给接收方。而要保证确实能传到接收方还需要接收方的MAC地址，也就是物理地址。IP地址和MAC地址是一一对应的关系，一个网络设备的IP地址可以更换，但是MAC地址一般是固定不变的。ARP协议可以将IP地址解析成对应的MAC地址。当通信的双方不在同一个局域网时，需要多次中转才能到达最终的目标，在中转的过程中需要通过下一个中转站的MAC地址来搜索下一个中转目标。具体过程如下图：<br><img src="http://o8l2fza1x.bkt.clouddn.com/IP%E5%8D%8F%E8%AE%AE.png" alt="IP协议"></p>
<h3 id="链路层-传输数据的硬件部分"><a href="#链路层-传输数据的硬件部分" class="headerlink" title="链路层 传输数据的硬件部分"></a>链路层 传输数据的硬件部分</h3><p>在网络层找到对方的MAC地址后，就将数据发送到数据链路层传输。至此请求报文已发出，客户端发送请求的阶段结束</p>
<h3 id="服务器接收报文"><a href="#服务器接收报文" class="headerlink" title="服务器接收报文"></a>服务器接收报文</h3><p>接收端服务器在链路层接收到数据后，删除该层的首部信息并向网络层传递，网络层将接收的数据向传输层传递，在传输层会将传输的数据按序号从组请求报文并传送给应用层。当数据传输到应用层才能算真正接收到由客户端发送过来的HTTP请求</p>
<h3 id="应用层-服务器发送HTTP响应报文"><a href="#应用层-服务器发送HTTP响应报文" class="headerlink" title="应用层 服务器发送HTTP响应报文"></a>应用层 服务器发送HTTP响应报文</h3><p>下面对百度首页响应报文首部进行分析：<br><strong>状态行</strong><br><figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">协议版本 状态码 状态码原因短语</span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br></pre></td></tr></table></figure></p>
<p><strong>首部字段</strong><br><figure class="highlight groovy"><table><tr><td class="code"><pre><span class="line">当前服务器上安装的HTTP服务器程序信息</span><br><span class="line"><span class="string">bfe:</span>Baidu Front End。百度人自己写的反向代理及防攻击接入层</span><br><span class="line"><span class="string">Server:</span> bfe/<span class="number">1.0</span><span class="number">.8</span><span class="number">.18</span></span><br><span class="line">响应日期时间</span><br><span class="line"><span class="string">Date:</span> Thu, <span class="number">08</span> Dec <span class="number">2016</span> <span class="number">14</span>:<span class="number">48</span>:<span class="number">19</span> GMT</span><br><span class="line">说明报文实体的媒体类型</span><br><span class="line">Content-<span class="string">Type:</span> text/html; charset=utf<span class="number">-8</span></span><br><span class="line">传输编码方式：分块编码</span><br><span class="line">Transfer-<span class="string">Encoding:</span> chunked</span><br><span class="line">链接方式：持久链接  http/<span class="number">1.1</span>之后这个已经没必要了</span><br><span class="line"><span class="string">Connection:</span> keep-alive</span><br><span class="line">只接受对持相同自然语言的请求返回缓存</span><br><span class="line"><span class="string">Vary:</span> Accept-Encoding</span><br><span class="line">缓存控制：仅向特定用户返回响应</span><br><span class="line">Cache-<span class="string">Control:</span> <span class="keyword">private</span></span><br><span class="line"><span class="string">Cxy_all:</span> baidu+<span class="number">43</span>a6e396a3ed26dc7d1de13c6af79e49</span><br><span class="line">缓存过期时间</span><br><span class="line"><span class="string">Expires:</span> Thu, <span class="number">08</span> Dec <span class="number">2016</span> <span class="number">14</span>:<span class="number">47</span>:<span class="number">38</span> GMT</span><br><span class="line">X-Powered-<span class="string">By:</span> HPHP</span><br><span class="line">X-UA-<span class="string">Compatible:</span> IE=Edge,chrome=<span class="number">1</span></span><br><span class="line">Strict-Transport-<span class="string">Security:</span> max-age=<span class="number">172800</span></span><br><span class="line"><span class="string">BDPAGETYPE:</span> <span class="number">1</span></span><br><span class="line"><span class="string">BDQID:</span> <span class="number">0xc9d964a600018bb8</span></span><br><span class="line"><span class="string">BDUSERID:</span> <span class="number">0</span></span><br><span class="line">设置cookie</span><br><span class="line">Set-<span class="string">Cookie:</span> H_PS_PSSID=<span class="number">1451</span>_21116_17001_21408_21417_21554_20929; path=/;</span><br></pre></td></tr></table></figure></p>
<p>响应报文的传输方式与请求报文相同，简单点说就是原路返回<br>在响应报文中我们通过Chrome DevTool的Network面板可以看到输入的www.baidu.com会被重定向到<a href="https://www.baidu.com/,点击重定向后的www.baidu.com,在右边的Response面板中可以看到客户端接收到的报文实体即返回的HTML页面代码" target="_blank" rel="noopener">https://www.baidu.com/,点击重定向后的www.baidu.com,在右边的Response面板中可以看到客户端接收到的报文实体即返回的HTML页面代码</a></p>
<p><strong>网络通信流程图</strong><br><img src="http://o8l2fza1x.bkt.clouddn.com/360%E5%8F%8D%E9%A6%88%E6%84%8F%E8%A7%81%E6%88%AA%E5%9B%BE16380515263720.png" alt="网络通信流程图"></p>
<h3 id="在网络通信阶段对前端优化建议："><a href="#在网络通信阶段对前端优化建议：" class="headerlink" title="在网络通信阶段对前端优化建议："></a>在网络通信阶段对前端优化建议：</h3><ol>
<li>减少HTTP请求数<ol>
<li>合并资源，如合并 JavaScript 文件、CSS 文件，利用 CSS Sprite 合并图片等</li>
<li>内联图片,data url节省了HTTP请求,但是如果这个图像在网页多个地方显示会加大网页的内容，延长下载时间。</li>
</ol>
</li>
<li>域名提前解析，在页面中不同域名的链接需指定预取域名：<code>&lt;link rel=&quot;dns-prefetch&quot; href=&quot;http://this-is-a.com&quot;&gt;</code>，IE9+支持</li>
<li>避免重定向（重定向会增加http请求的次数）</li>
<li>cookie优化，cookie越多会导致请求头越大</li>
<li>启用GZIP压缩（Accept-Encoding：g-zip）</li>
<li>使用 CDN加速，减小服务器压力</li>
<li>合理利用HTTP缓存，通过设置Expires</li>
</ol>
<h2 id="页面渲染"><a href="#页面渲染" class="headerlink" title="页面渲染"></a>页面渲染</h2><p>客户端在接收到html代码之后，接下来的流程如下：</p>
<h3 id="解析html以构建DOM树"><a href="#解析html以构建DOM树" class="headerlink" title="解析html以构建DOM树"></a>解析html以构建DOM树</h3><p>解析一个文档即将其转换为具有一定意义的结构(编码可以理解和使用的东西)。解析的结果通常是表达文档结构的节点树，称为解析树或语法树。<br>解析是以文档所遵循的语法规则（编写文档所用的语言或格式）为基础的。所有可以解析的格式都必须对应确定的语法（由词汇和语法规则构成）。这称为与上下文无关的语法。<br>解析的过程可以分成两个子过程：词法分析和语法分析。</p>
<ul>
<li>词法分析是将输入内容分割成大量标记的过程。标记是语言中的词汇，即构成内容的单位。在人类语言中，它相当于语言字典中的单词。</li>
<li>语法分析是应用语言的语法规则的过程。</li>
</ul>
<p>解析器通常将解析工作分给以下两个组件来处理：</p>
<ul>
<li>词法分析器（有时也称为标记生成器），负责将输入内容分解成一个个有效标记；</li>
<li>而解析器负责根据语言的语法规则分析文档的结构，从而构建解析树。</li>
</ul>
<p>由于不能使用常规的解析技术，浏览器就创建了自定义的解析器来解析 HTML。此解析算法由两个阶段组成：标记化和树构建。<br>具体的解析过程可参考<a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/" target="_blank" rel="noopener">浏览器的工作原理</a>中的标记化算法和构建树算法</p>
<p>解析器的输出“解析树”是由 DOM 元素和属性节点构成的树结构。DOM 是文档对象模型 (Document Object Model) 的缩写。它是 HTML 文档的对象表示，同时也是外部内容（例如 JavaScript）与 HTML 元素之间的接口。解析树的根节点是“Document”对象。  </p>
<p>当解析到link标签时会请求相应的CSS文件，并将其CSS规则解析为StyleSheet对象，CSS文件中的其他外链资源如背景图片等只有等到其规则与DOM树某节点相匹配时才会加载<br>当解析遇到img标签时会根据路径向服务器相应的资源文件夹中请求图片资源，但并不会等待图片资源下载完再去解析接下来的html，而是并发执行即图片资源仍在下载，html解析也在进行。如果没有定义图片的height和width属性，那么浏览器为了能够显示每一个加载的图像，它需要先下载图像，然后解析出图像的高度和宽度，并在显示窗口留出相应的屏幕空间，这样就会导致浏览器不断地重新计算/调整页面的布局，这可能会延迟文档的显示，并导致页面重绘。<br>当解析遇到script标签时，将启动 JavaScript 引擎，这时将阻塞 DOM 树的构建。因为 JavaScript 执行过程中， JavaScript 很可能会对 DOM 树进行读写操作。直到 JavaScript 执行完毕（此时执行的是全局对象初始创建和全局上下文中代码的执行），DOM树才会恢复构建。</p>
<h3 id="构建render树"><a href="#构建render树" class="headerlink" title="构建render树"></a>构建render树</h3><p>为了更好地用户体验效果，浏览器会在构建DOM树的同时，也在构建render树。呈现树的每一个节点即为与其相对应的DOM节点的CSS框，框的类型与DOM节点的display属性有关，block元素生成block框，inline元素生成inline框。每一个呈现树节点都有与之相对应的DOM节点，但DOM节点不一定有与之相对应的呈现树节点，比如display属性为none的DOM节点，而且呈现树节点在呈现树中的位置与他们在DOM树中的位置不一定相同，比如float与绝对定位元素。在构建render树的时候需要为DOM树匹配CSS规则，在这个阶段因为匹配规则是从右往左匹配的，所以css的编写规则很重要。不好的CSS选择器写法会影响到页面渲染的效率，具体是如何编写高效的CSS规则的可参考这篇文章<a href="http://www.cnblogs.com/jesse131/p/6135773.html" target="_blank" rel="noopener">CSS选择器性能分析</a></p>
<h3 id="布局render树"><a href="#布局render树" class="headerlink" title="布局render树"></a>布局render树</h3><p>在创建render树时，并不包含位置和大小信息。计算这些值的过程称为布局或重排。布局是一个递归的过程，它从根元素开始，然后递归遍历部分或所有的框架层次结构，为每一个需要计算的呈现器计算几何信息。<br>布局通常具有以下模式：</p>
<ol>
<li>父呈现器确定自己的宽度。</li>
<li>父呈现器依次处理子呈现器，并且：<ol>
<li>放置子呈现器（设置 x,y 坐标）。</li>
<li>如果有必要，调用子呈现器的布局，这会计算子呈现器的高度。</li>
</ol>
</li>
<li>父呈现器根据子呈现器的累加高度以及边距和补白的高度来设置自身高度，此值也可供父呈现器的父呈现器使用。</li>
<li>将其 dirty 位设置为 false</li>
</ol>
<h3 id="绘制render树"><a href="#绘制render树" class="headerlink" title="绘制render树"></a>绘制render树</h3><p>在绘制阶段，系统会遍历render树，并调用呈现器的“paint”方法，将呈现器的内容显示在屏幕上。绘制工作是使用用户界面基础组件完成的。和布局一样，绘制也分为全局（绘制整个呈现树）和增量两种。在增量绘制中，部分呈现器发生了更改，但是不会影响整个树。更改后的呈现器将其在屏幕上对应的矩形区域设为无效，这导致 OS 将其视为一块“dirty 区域”，并生成“paint”事件。<br>绘制顺序:</p>
<ol>
<li>背景颜色</li>
<li>背景图片</li>
<li>边框</li>
<li>子代</li>
<li>轮廓</li>
</ol>
<h3 id="页面变化造成的影响"><a href="#页面变化造成的影响" class="headerlink" title="页面变化造成的影响"></a>页面变化造成的影响</h3><p>在发生变化时，浏览器会尽可能做出最小的响应。因此，元素的颜色改变后，只会对该元素进行重绘。元素的位置改变后，只会对该元素及其子元素（可能还有同级元素）进行布局和重绘。添加 DOM 节点后，会对该节点进行布局和重绘。一些重大变化（例如增大“html”元素的字体）会导致缓存无效，使得整个呈现树都会进行重新布局和绘制。</p>
<h3 id="在页面渲染阶段对前端优化建议："><a href="#在页面渲染阶段对前端优化建议：" class="headerlink" title="在页面渲染阶段对前端优化建议："></a>在页面渲染阶段对前端优化建议：</h3><ul>
<li>建议将 CSS 文件放在页首，以便构建 DOM 树；而将 JavaScript 文件尽量放在页面下方，防止阻塞构建 DOM 树；而 JavaScript 的 onload 事件里，不要写太多影响首屏渲染的、操作 DOM 树的 JavaScript 代码。</li>
<li>精简 JavaScript 和 CSS 代码，并进行代码压缩，使得css和js资源更快的下载</li>
<li>编写高效的CSS代码</li>
<li>重要的图片或者想让用户优先看到的图片使用img标签，次要的图片使用background引入</li>
</ul>
<p>参考文献：</p>
<ol>
<li><a href="https://book.douban.com/subject/25863515/" target="_blank" rel="noopener">《图解HTTP》</a></li>
<li><a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/" target="_blank" rel="noopener">浏览器的工作原理</a></li>
<li><a href="https://book.douban.com/subject/3132277/" target="_blank" rel="noopener">《高性能网站建设指南》</a></li>
</ol>
<p>由于个人水平有限，不够详细或有误的地方还望指出，共同进步才是最好的结果</p>
</div><div class="common-bottom"><p>如需转载请保留此段声明</p><p>作者：<a href="/about/">Jesse</a></p><p>出处：<a href="/">http://www.jesse131.cn</a></p><p>如果您对本文有什么疑问，欢迎提出评论，您的建议是我写优质文章的动力。</p></div><div class="tags"><a href="/tags/web/">WEB</a></div><div class="post-share"><!-- baidu分享--><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="more" class="bds_more"></a></div><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};
with(document)0[body.appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></div><div class="post-nav"><a href="/articles/javascript/JavaScript跨域方式总结.html" class="pre">Javascript几种跨域方式总结</a><a href="/articles/javascript/javascript执行流总结.html" class="next">Javascript执行流总结</a></div><div id="comments"><link type="text/css" rel="stylesheet" href="//imsun.github.io/gitment/style/default.css"><div id="gitment-ctn"> </div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#网络通信"><span class="toc-text">网络通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#输入网址"><span class="toc-text">输入网址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#负责域名查询与解析的DNS服务"><span class="toc-text">负责域名查询与解析的DNS服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用层-客户端发送HTTP请求报文"><span class="toc-text">应用层 客户端发送HTTP请求报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#传输层-确保传输报文可靠性的TCP协议"><span class="toc-text">传输层 确保传输报文可靠性的TCP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#网络层-负责传输的IP协议"><span class="toc-text">网络层 负责传输的IP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#链路层-传输数据的硬件部分"><span class="toc-text">链路层 传输数据的硬件部分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务器接收报文"><span class="toc-text">服务器接收报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用层-服务器发送HTTP响应报文"><span class="toc-text">应用层 服务器发送HTTP响应报文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在网络通信阶段对前端优化建议："><span class="toc-text">在网络通信阶段对前端优化建议：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#页面渲染"><span class="toc-text">页面渲染</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#解析html以构建DOM树"><span class="toc-text">解析html以构建DOM树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构建render树"><span class="toc-text">构建render树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#布局render树"><span class="toc-text">布局render树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绘制render树"><span class="toc-text">绘制render树</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#页面变化造成的影响"><span class="toc-text">页面变化造成的影响</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#在页面渲染阶段对前端优化建议："><span class="toc-text">在页面渲染阶段对前端优化建议：</span></a></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/articles/tool/the-usual-command-line-of-line-of-vim.html">工作中常用到的Vim命令</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/html-css/make-a-thorough-inquiry-about-css-vertical-align.html">Vertical-Align属性探究</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/php/Yii-study-notes.html">Yii1.1.16学习记录</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/mobile/mobile-webpages-commonly-used-header-tags.html">移动端Web页面开发常用的头部标签设置</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/tool/the-usual-git-command.html">常用的Git命令整理</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/html-css/summary-of-various-length-unit-in-css.html">CSS中各种长度单位总结</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/javascript/the-different-between-innerHTML-innerText-and-textContent.html">innerHTML,innerText,textContent的区别详解</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/javascript/对JavaScript中this的理解.html">对JavaScript中this的理解</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/tool/set-up-my-front-end-build-tool-webpack.html">搭建自己的Webpack前端构建工具</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/notes/performance-best-practices-for-web-developer.html">《高性能网站建设进阶指南》--读书笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bootstrap/">Bootstrap</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">HTML-CSS</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">JavaScript</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">PHP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/photoshop/">Photoshop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">WEB</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webserver/">WEB服务器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jQuery</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">前端工具</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/translation/">前端翻译</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mobile/">移动端开发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/notes/">读书笔记</a><span class="category-list-count">13</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/photoshop/" style="font-size: 15px;">Photoshop</a> <a href="/tags/bootstrap/" style="font-size: 15px;">Bootstrap</a> <a href="/tags/html/" style="font-size: 15px;">HTML</a> <a href="/tags/javascript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/jquery/" style="font-size: 15px;">jQuery</a> <a href="/tags/mobile/" style="font-size: 15px;">Mobile</a> <a href="/tags/http/" style="font-size: 15px;">HTTP</a> <a href="/tags/web/" style="font-size: 15px;">WEB</a> <a href="/tags/angularjs/" style="font-size: 15px;">AngularJs</a> <a href="/tags/css/" style="font-size: 15px;">CSS</a> <a href="/tags/php/" style="font-size: 15px;">PHP</a> <a href="/tags/yii/" style="font-size: 15px;">Yii</a> <a href="/tags/gulp/" style="font-size: 15px;">Gulp</a> <a href="/tags/webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/vim/" style="font-size: 15px;">Vim</a> <a href="/tags/git/" style="font-size: 15px;">Git</a> <a href="/tags/sublimetext3/" style="font-size: 15px;">SublimeText3</a> <a href="/tags/apache/" style="font-size: 15px;">Apache</a> <a href="/tags/mysql/" style="font-size: 15px;">MySQL</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul><li><a href="http://javascript.ruanyifeng.com/" title="JavaScript 标准参考教程" target="_blank">JavaScript 标准参考教程</a></li><li><a href="http://www.cnblogs.com/lyzg/" title="流云诸葛" target="_blank">流云诸葛</a></li><li><a href="http://www.cnblogs.com/TomXu/archive/2011/12/15/2288411.html" title="深入理解JavaScript系列" target="_blank">深入理解JavaScript系列</a></li><li><a href="http://caibaojian.com/page/2" title="前端开发博客" target="_blank">前端开发博客</a></li><li><a href="http://www.cnblogs.com/jesse131/" title="前端开发之路" target="_blank">前端开发之路</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><span> Copyright &copy 2016-2017 <a href="//about/" rel="nofollow">Jesse.</a></span></p><p><span>Total visits：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i></span><span> Theme by  <a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by  <a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><!-- 百度统计--><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?467c30f9f602c453fb62d79e98d80329";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.appendChild(hm);
  })();
</script><!-- 百度内容推送--><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.appendChild(bp);
})();

</script><script type="text/javascript" src="/js/bundle.js"></script><!--gitment--><script src="//imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  //- id: window.location.href,
  owner: 'Jesse121',
  repo: 'http://www.jesse131.cn/blog/',
  oauth: {
    client_id: '1d84813ae13cd94072f0',
    client_secret: 'e0a20bd0498c8eb5eb6145c9802b47597d35f35a',
  },
})
gitment.render('gitment-ctn')</script></body></html>