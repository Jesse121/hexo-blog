<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>《HTML5程序设计第二版》--读书笔记</title><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="white"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-title" content="我的博客"><meta name="description" content="专注前端开发，前端开发技术博客"><meta name="keywords" content="前端开发，PHP开发，Javascript，前端开发博客"><link rel="dns-prefetch" href="www.jesse131.cn"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="shortcut icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">《HTML5程序设计第二版》--读书笔记</h1><a id="logo" href="/.">前端之路</a><p class="description">路漫漫其修远兮，吾将上下而求索</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="搜索..."></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">《HTML5程序设计第二版》--读书笔记</h1><div class="post-meta"><span class="date">2016-03-13</span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i> Hits</i></i></span><a href="/articles/notes/pro-html5-programming-2nd-edition.html#comments" class="comment-count"></a></div><div class="post-content"><h3 id="第一章、HTML5概述"><a href="#第一章、HTML5概述" class="headerlink" title="第一章、HTML5概述"></a>第一章、HTML5概述</h3><h4 id="1-6-HTML5的新功能"><a href="#1-6-HTML5的新功能" class="headerlink" title="1.6 HTML5的新功能"></a>1.6 HTML5的新功能</h4><h5 id="1-6-1-新的DOCTYPE和字符集"><a href="#1-6-1-新的DOCTYPE和字符集" class="headerlink" title="1.6.1 新的DOCTYPE和字符集"></a>1.6.1 新的DOCTYPE和字符集</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用HTML5的DOCTYPE会触发浏览器以标准模式渲染显示页面<br>web页面有多种渲染模式，怪异模式(Quriks)、近标准模式(Almost Standards)以及标准模式(Standards)。浏览器会根据DOCTYPE识别该用哪种模式渲染页面。<br><a id="more"></a></p>
<h5 id="1-6-2-新元素和旧元素"><a href="#1-6-2-新元素和旧元素" class="headerlink" title="1.6.2 新元素和旧元素"></a>1.6.2 新元素和旧元素</h5><p><code>&lt;article&gt;</code>标签定义外部的内容。<br>比如来自一个外部的新闻提供者的一篇新的文章，或者来自 blog的文本，或者是来自论坛的文本。亦或是来自其他外部源内容,内容独立于文档的其余部分</p>
<p><code>&lt;address&gt;</code>标签定义文档作者或拥有者的联系信息。<br>通常的做法是将 address 元素添加到网页的头部或底部。</p>
<p><code>&lt;aside&gt;</code>标签定义主内容之外的内容。<br>aside 标签的内容应该与附近的内容相关。</p>
<p><code>&lt;embed&gt;</code>标签定义嵌入的内容，比如插件。</p>
<p><code>&lt;fieldset&gt;</code>标签会在相关表单元素周围绘制边框</p>
<p><code>&lt;legend&gt;</code>fieldset 元素定义标题（caption）。</p>
<p><code>&lt;figure&gt;</code> 标签规定独立的流内容（图像、图表、照片、代码等等），用于对元素进行组合。<br>使用 figcaption元素为元素组添加标题。</p>
<p><code>&lt;figcaption&gt;</code> 标签定义 figure 元素的标题。<br>figcaption元素应该被置于figure元素的第一个或最后一个子元素的位置。</p>
<p><code>&lt;footer&gt;</code> 标签定义 section 或 document 的页脚。<br>它包含创作者的姓名、文档的创作日期以及联系信息。</p>
<p><code>&lt;header&gt;</code> 标签定义 section 或 document 的页眉。</p>
<p><code>&lt;hgroup&gt;</code> 标签用于对网页或区段（section）的标题进行组合。</p>
<p><code>&lt;main&gt;</code> 元素中的内容对于文档来说应当是唯一的。<br>它不应包含在文档中重复出现的内容，比如侧栏、导航栏、版权信息、站点标志或搜索表单。IE不支持<br><strong>PS</strong>：在一个文档中，不能出现一个以上的 <code>&lt;main&gt;</code> 元素。<code>&lt;main&gt;</code>元素不能是以下元素的后代：<code>&lt;article&gt;、&lt;aside&gt;、&lt;footer&gt;、&lt;header&gt;</code> 或 <code>&lt;nav&gt;</code>。</p>
<p><code>&lt;mark&gt;</code>主要用来在视觉上向用户呈现那些需要突出的文字。<br>比较典型的应用就是在搜索结果中向用户高亮显示搜索关键词。</p>
<p><code>&lt;nav&gt;</code> 标签定义导航链接的部分。</p>
<p><code>&lt;details&gt;</code>标签定义元素的细节，用户可进行查看，或通过点击进行隐藏。与 legend 一起使用，来制作 detail 的标题。该标题对用户是可见的，当在其上点击时可打开或关闭 detail。<br>目前只有 Chrome 支持 details 标签。</p>
<p><code>&lt;datalist&gt;</code>标签定义可选数据的列表。<br>与 input 元素配合使用，就可以制作出输入值的下拉列表。</p>
<p><code>&lt;section&gt;</code>标签定义文档中的节（section、区段）。<br>比如章节、页眉、页脚或文档中的其他部分。</p>
<p><code>&lt;summary&gt;</code> 标签包含 details 元素的标题，details 元素用于描述有关文档或文档片段的详细信息。<br>summary 元素应该是 details 元素的第一个子元素。</p>
<p><code>&lt;time&gt;</code> 标签定义日期或时间，或者两者。</p>
<p><code>&lt;audio&gt;</code>标签象网页中插入声音，比如音乐或其他音频流。</p>
<p><code>&lt;video&gt;</code> 标签定义视频，比如电影片段或其他视频流</p>
<p><code>&lt;canvas&gt;</code> 标签定义图形，比如图表和其他图像。<br>这个 HTML元素是为了客户端矢量图形而设计的。它自己没有行为，但却把一个绘图 API 展现给客户端 JavaScript以使脚本能够把想绘制的东西都绘制到一块画布上。</p>
<p><code>&lt;command&gt;</code> 标签定义命令按钮，比如单选按钮、复选框或按钮</p>
<p><code>&lt;keygen&gt;</code> 标签定义生成密钥。</p>
<p><code>&lt;meter&gt;</code> 标签定义度量衡。仅用于已知最大和最小值的度量。<br>必须定义度量的范围，既可以在元素的文本中，也可以在 min/max 属性中定义。</p>
<p><code>&lt;output&gt;</code> 标签定义不同类型的输出，比如脚本的输出。</p>
<p><code>&lt;progress&gt;</code> 标签运行中的进程。<br>可以使用progress标签来显示 JavaScript 中耗费时间的函数的进程。</p>
<p>HTML中所有自闭合的标签：<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;br&gt; &lt;img&gt; &lt;input&gt; &lt;area&gt; &lt;base&gt; &lt;br&gt; &lt;col&gt; &lt;command&gt; &lt;embed&gt; &lt;hr&gt; &lt;keygen&gt; &lt;link&gt;</span><br><span class="line">&lt;meta&gt; &lt;param&gt; &lt;source&gt; &lt;track&gt; &lt;wbr&gt;</span><br></pre></td></tr></table></figure></p>
<p>被移除的旧元素<code>basefont</code>、<code>big</code>、<code>center</code>、<code>font</code>、<code>strike</code>、<code>tt</code>,推荐用css处理更好</p>
<h5 id="1-6-4-使用Selectors-API简化选取操作"><a href="#1-6-4-使用Selectors-API简化选取操作" class="headerlink" title="1.6.4 使用Selectors API简化选取操作"></a>1.6.4 使用Selectors API简化选取操作</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">".error"</span>);   <span class="comment">//返回第一个.error</span></span><br><span class="line"><span class="built_in">document</span>.querySelectorAll(<span class="string">".error"</span>) <span class="comment">//返回所有的.error</span></span><br></pre></td></tr></table></figure>
<p>IE8及以上支持</p>
<h3 id="第二章、Canvas-API"><a href="#第二章、Canvas-API" class="headerlink" title="第二章、Canvas API"></a>第二章、Canvas API</h3><h4 id="2-2-使用HTML5-Canvas-API"><a href="#2-2-使用HTML5-Canvas-API" class="headerlink" title="2.2 使用HTML5 Canvas API"></a>2.2 使用HTML5 Canvas API</h4><h5 id="2-2-1-检测浏览器支持情况"><a href="#2-2-1-检测浏览器支持情况" class="headerlink" title="2.2.1 检测浏览器支持情况"></a>2.2.1 检测浏览器支持情况</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"drawing"</span>&gt;</span>Update your browser to enjoy canvas!<span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> drawing = <span class="built_in">document</span>.getElementById(<span class="string">'drawing'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="comment">//确定浏览器支持canvas</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(drawing.context)&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//code</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-2-在页面中加入canvas"><a href="#2-2-2-在页面中加入canvas" class="headerlink" title="2.2.2 在页面中加入canvas"></a>2.2.2 在页面中加入canvas</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"diagonal"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid;"</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span> <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="function"><span class="keyword">function</span> <span class="title">drawDiagonal</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// Get the canvas element and its drawing context</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'diagonal'</span>);</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//canvas中所有操作数通过上下文对象来完成的</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// Create a path in absolute coordinates</span></span></span><br><span class="line"><span class="undefined">        context.beginPath();</span></span><br><span class="line"><span class="undefined">        context.moveTo(70, 140);</span></span><br><span class="line"><span class="undefined">        context.lineTo(140, 70);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">        <span class="comment">// Stroke the line onto the canvas</span></span></span><br><span class="line"><span class="undefined">        context.stroke();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, drawDiagonal, <span class="literal">true</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>使用canvas元素，必须先设置其width、height属性，其效果与在style中设置并不相同<br>Canvas 是一个画板和一张画纸，画板相当于一个容器，画图是在画纸上进行的，画板和画纸的默认宽高是<code>300*150px</code>，当画纸与画板宽高相等时，图像不会被拉伸，当画纸与画板宽高不一样时，图像就会被拉伸（变形）。<br>style样式里设定的是仅<strong>画板</strong>的宽高，画纸的宽高还是为默认值<code>300*150px</code>， 画纸不会让画板就这么空出一片，于是画纸连同图像就要一起拉伸到跟画板大小一样。所以就得到了变形之后的图片。</p>
<h5 id="2-2-3-偏移"><a href="#2-2-3-偏移" class="headerlink" title="2.2.3 偏移"></a>2.2.3 偏移</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawDiagonal</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'diagonal'</span>);</span><br><span class="line">    <span class="keyword">var</span> context = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在变换前保存context状态可方便以后恢复</span></span><br><span class="line">    context.save();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Move the drawing context to the right, and down</span></span><br><span class="line">    context.translate(<span class="number">70</span>, <span class="number">140</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Draw the same line as before, but using the origin as a start</span></span><br><span class="line">    context.beginPath();</span><br><span class="line">    context.moveTo(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    context.lineTo(<span class="number">70</span>, <span class="number">-70</span>);</span><br><span class="line">    context.stroke();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 恢复context至原始状态</span></span><br><span class="line">    context.restore();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-2-4-路径"><a href="#2-2-4-路径" class="headerlink" title="2.2.4 路径"></a>2.2.4 路径</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">beginPath() <span class="comment">//开始绘制</span></span><br><span class="line">moveTo(x,y) <span class="comment">//将当前位置移动到新目标位置</span></span><br><span class="line">lineTo(x,y) <span class="comment">//从上一位置划线到新位置</span></span><br><span class="line">closePath() <span class="comment">//闭合路径</span></span><br></pre></td></tr></table></figure>
<h5 id="2-2-5-描边样式"><a href="#2-2-5-描边样式" class="headerlink" title="2.2.5 描边样式"></a>2.2.5 描边样式</h5><p>lineWidth = value 设置线条宽度。<br>value<br>描述线段宽度的数字。 0、 负数、 Infinity 和 NaN 会被忽略。</p>
<p>lineCap = type 设置线条末端样式。<br>butt 线段末端以方形结束。<br>round 线段末端以圆形结束。<br>square 线段末端以方形结束，但是增加了一个宽度和线段相同，高度是线段厚度一半的矩形区域。  </p>
<p>lineJoin = type 设定线条与线条间接合处的样式。<br>round<br>通过填充一个额外的，圆心在相连部分末端的扇形，绘制拐角的形状。 圆角的半径是线段的宽度。<br>bevel<br>在相连部分的末端填充一个额外的以三角形为底的区域， 每个部分都有各自独立的矩形拐角。<br>miter<br>通过延伸相连部分的外边缘，使其相交于一点，形成一个额外的菱形区域。这个设置可以通过 miterLimit 属性看到效果。  </p>
<p>miterLimit = value<br>限制当两条线相交时交接处最大长度；所谓交接处长度（斜接长度）是指线条交接处内角顶点到外角顶点的长度。<br>value 斜接面限制比例的的数字。 0、负数、Infinity 和 NaN 都会被忽略。  </p>
<p>getLineDash()返回一个包含当前虚线样式，长度为非负偶数的数组。  </p>
<p>setLineDash(segments) 设置当前虚线样式。  </p>
<p>lineDashOffset = value 设置虚线样式的起始偏移量。</p>
<h5 id="2-2-6-填充样式"><a href="#2-2-6-填充样式" class="headerlink" title="2.2.6 填充样式"></a>2.2.6 填充样式</h5><p>fillStyle = color 设置图形的填充颜色。<br>strokeStyle = color 设置图形轮廓的颜色。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">context.strokeStyle = <span class="string">'#663300'</span>;</span><br><span class="line">context.stroke(); <span class="comment">//填充路径</span></span><br><span class="line"></span><br><span class="line">context.fillStyle = <span class="string">'#339900'</span>;</span><br><span class="line">context.fill(); <span class="comment">//填充闭合路径内部像素点</span></span><br><span class="line"></span><br><span class="line">context.fillStyle = <span class="string">'#663300'</span>;</span><br><span class="line">context.fillRect(<span class="number">-5</span>, <span class="number">-50</span>, <span class="number">10</span>, <span class="number">50</span>); <span class="comment">//填充矩形区域</span></span><br></pre></td></tr></table></figure></p>
<h5 id="2-2-7-绘制曲线"><a href="#2-2-7-绘制曲线" class="headerlink" title="2.2.7 绘制曲线"></a>2.2.7 绘制曲线</h5><p>arc(x, y, radius, startAngle, endAngle, anticlockwise)<br>画一个以（x,y）为圆心的以radius为半径的圆弧（圆），从startAngle开始到endAngle结束，按照anticlockwise给定的方向（默认为顺时针）来生成。</p>
<p>arcTo(x1, y1, x2, y2, radius)<br>根据给定的控制点和半径画一段圆弧，再以直线连接两个控制点。</p>
<p>quadraticCurveTo(cp1x, cp1y, x, y)<br>绘制二次贝塞尔曲线，cp1x,cp1y为一个控制点，x,y为结束点。</p>
<p>bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y)<br>绘制三次贝塞尔曲线，cp1x,cp1y为控制点一，cp2x,cp2y为控制点二，x,y为结束点。</p>
<h5 id="2-2-9-在canvas中插入图片"><a href="#2-2-9-在canvas中插入图片" class="headerlink" title="2.2.9 在canvas中插入图片"></a>2.2.9 在canvas中插入图片</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> bark = <span class="keyword">new</span> Image();</span><br><span class="line">bark.src = <span class="string">"bark.jpg"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 必须等到图片完全加载后才能对其操作</span></span><br><span class="line">bark.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    context.drawImage(bark, <span class="number">-5</span>, <span class="number">-50</span>, <span class="number">10</span>, <span class="number">50</span>);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="2-2-10-渐变"><a href="#2-2-10-渐变" class="headerlink" title="2.2.10 渐变"></a>2.2.10 渐变</h5><p>createLinearGradient(x1, y1, x2, y2)<br>createLinearGradient 方法接受 4 个参数，表示渐变的起点 (x1,y1) 与终点 (x2,y2)。</p>
<p>createRadialGradient(x1, y1, r1, x2, y2, r2)<br>createRadialGradient 方法接受 6 个参数，前三个定义一个以 (x1,y1) 为原点，半径为 r1 的圆，后三个参数则定义另一个以 (x2,y2) 为原点，半径为 r2 的圆。  </p>
<p>gradient.addColorStop(position, color)<br>addColorStop 方法接受 2 个参数，position 参数必须是一个 0.0 与 1.0 之间的数值，表示渐变中颜色所在的相对位置。例如，0.5 表示颜色会出现在正中间。color 参数必须是一个有效的 CSS 颜色值（如 #FFF， rgba(0,0,0,1)，等等）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Create a 3 stop gradient horizontally across the trunk</span></span><br><span class="line"><span class="keyword">var</span> trunkGradient = context.createLinearGradient(<span class="number">-5</span>, <span class="number">-50</span>, <span class="number">5</span>, <span class="number">-50</span>);</span><br><span class="line"><span class="comment">// The beginning of the trunk is medium brown</span></span><br><span class="line">trunkGradient.addColorStop(<span class="number">0</span>, <span class="string">'#663300'</span>);</span><br><span class="line"><span class="comment">// The middle-left of the trunnk is lighter in color</span></span><br><span class="line">trunkGradient.addColorStop(<span class="number">0.4</span>, <span class="string">'#996600'</span>);</span><br><span class="line"><span class="comment">// The right edge of the trunk is darkest</span></span><br><span class="line">trunkGradient.addColorStop(<span class="number">1</span>, <span class="string">'#552200'</span>);</span><br><span class="line"><span class="comment">// Apply the gradient as the fill style, and draw the trunk</span></span><br><span class="line">context.fillStyle = trunkGradient;</span><br><span class="line">context.fillRect(<span class="number">-5</span>, <span class="number">-50</span>, <span class="number">10</span>, <span class="number">50</span>);</span><br></pre></td></tr></table></figure>
<h5 id="2-2-11-使用图案样式"><a href="#2-2-11-使用图案样式" class="headerlink" title="2.2.11 使用图案样式"></a>2.2.11 使用图案样式</h5><p>createPattern(image, type)<br>该方法接受两个参数。Image 可以是一个 Image 对象的引用，或者另一个 canvas 对象。Type 必须是下面的字符串值之一：repeat，repeat-x，repeat-y 和 no-repeat。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> gravel = <span class="keyword">new</span> Image();</span><br><span class="line">gravel.src = <span class="string">"gravel.jpg"</span>;</span><br><span class="line">gravel.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    context.strokeStyle = context.createPattern(gravel, <span class="string">'repeat'</span>);</span><br><span class="line">    context.lineWidth = <span class="number">20</span>;</span><br><span class="line">    context.stroke();</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="2-2-12-缩放"><a href="#2-2-12-缩放" class="headerlink" title="2.2.12 缩放"></a>2.2.12 缩放</h5><p>scale(x, y)<br>scale 方法接受两个参数。x,y 分别是横轴和纵轴的缩放因子，它们都必须是正值。值比 1.0 小表示缩小，比 1.0 大则表示放大，值为 1.0 时什么效果都没有。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">context.scale(<span class="number">2</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure></p>
<h5 id="2-2-13-旋转"><a href="#2-2-13-旋转" class="headerlink" title="2.2.13 旋转"></a>2.2.13 旋转</h5><p>rotate(angle)<br>这个方法只接受一个参数：旋转的角度(angle)，它是顺时针方向的，以弧度为单位的值。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">context.rotate(<span class="built_in">Math</span>*PI/<span class="number">2</span>);</span><br></pre></td></tr></table></figure></p>
<h5 id="2-2-14-文本"><a href="#2-2-14-文本" class="headerlink" title="2.2.14 文本"></a>2.2.14 文本</h5><p>fillText(text, x, y [, maxWidth])<br>在指定的(x,y)位置填充指定的文本，绘制的最大宽度是可选的.  </p>
<p>strokeText(text, x, y [, maxWidth])<br>在指定的(x,y)位置绘制文本边框，绘制的最大宽度是可选的.<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">context.textAlign = <span class="string">'center'</span>;</span><br><span class="line">context.fillText(<span class="string">'Happy Trails!'</span>, <span class="number">200</span>, <span class="number">60</span>, <span class="number">400</span>);</span><br></pre></td></tr></table></figure></p>
<h5 id="2-2-15-阴影"><a href="#2-2-15-阴影" class="headerlink" title="2.2.15 阴影"></a>2.2.15 阴影</h5><p>shadowOffsetX = float<br>shadowOffsetX 和 shadowOffsetY 用来设定阴影在 X 和 Y 轴的延伸距离，它们是不受变换矩阵所影响的。负值表示阴影会往上或左延伸，正值则表示会往下或右延伸，它们默认都为 0。</p>
<p>shadowOffsetY = float<br>shadowOffsetX 和 shadowOffsetY 用来设定阴影在 X 和 Y 轴的延伸距离，它们是不受变换矩阵所影响的。负值表示阴影会往上或左延伸，正值则表示会往下或右延伸，它们默认都为 0。</p>
<p>shadowBlur = float<br>shadowBlur 用于设定阴影的模糊程度，其数值并不跟像素数量挂钩，也不受变换矩阵的影响，默认为 0。</p>
<p>shadowColor = color<br>shadowColor 是标准的 CSS 颜色值，用于设定阴影颜色效果，默认是全透明的黑色。<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">context.shadowOffsetX = <span class="number">15</span>;</span><br><span class="line">context.shadowOffsetY = <span class="number">-10</span>;</span><br><span class="line">context.shadowBlur = <span class="number">2</span>;</span><br></pre></td></tr></table></figure></p>
<h3 id="第三章、SVG"><a href="#第三章、SVG" class="headerlink" title="第三章、SVG"></a>第三章、SVG</h3><h4 id="3-1-5-在页面中添加SVG"><a href="#3-1-5-在页面中添加SVG" class="headerlink" title="3.1.5 在页面中添加SVG"></a>3.1.5 在页面中添加SVG</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"400"</span> <span class="attr">height</span>=<span class="string">"600"</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-1-7-变换SVG元素"><a href="#3-1-7-变换SVG元素" class="headerlink" title="3.1.7 变换SVG元素"></a>3.1.7 变换SVG元素</h4><p><code>&lt;g&gt;</code>元素代表“组”,可以用来结合多个相关元素 </p>
<h4 id="3-1-8-复用内容"><a href="#3-1-8-复用内容" class="headerlink" title="3.1.8 复用内容"></a>3.1.8 复用内容</h4><p><code>&lt;defs&gt;</code>元素定义留待将来使用的内容<br><code>&lt;use&gt;</code>元素用于连接到<code>&lt;defs&gt;</code>定义的内容<br><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defs</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">g</span> <span class="attr">id</span>=<span class="string">"ShapeGroup"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rect</span> <span class="attr">x</span>=<span class="string">"10"</span> <span class="attr">y</span>=<span class="string">"20"</span> <span class="attr">width</span>=<span class="string">"100"</span> <span class="attr">height</span>=<span class="string">"80"</span> <span class="attr">stroke</span>=<span class="string">"red"</span> <span class="attr">fill</span>=<span class="string">"#ccc"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">defs</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#ShapeGroup"</span> <span class="attr">transform</span>=<span class="string">"translate(60,0) scale(0.5)"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#ShapeGroup"</span> <span class="attr">transform</span>=<span class="string">"translate(120,80) scale(0.4)"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h4 id="3-1-9-图案和渐变"><a href="#3-1-9-图案和渐变" class="headerlink" title="3.1.9 图案和渐变"></a>3.1.9 图案和渐变</h4><h4 id="3-1-10-SVG路径"><a href="#3-1-10-SVG路径" class="headerlink" title="3.1.10 SVG路径"></a>3.1.10 SVG路径</h4><h4 id="3-1-11-使用SVG文本"><a href="#3-1-11-使用SVG文本" class="headerlink" title="3.1.11 使用SVG文本"></a>3.1.11 使用SVG文本</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">y</span>=<span class="string">"60"</span> <span class="attr">x</span>=<span class="string">"200"</span> <span class="attr">font-family</span>=<span class="string">"impact"</span> <span class="attr">font-size</span>=<span class="string">"60px"</span> <span class="attr">fill</span>=<span class="string">"#996600"</span> <span class="attr">text-anchor</span>=<span class="string">"middle"</span>&gt;</span></span><br><span class="line">    Happy Trails!</span><br><span class="line">  <span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="第四章、Audio-and-Video"><a href="#第四章、Audio-and-Video" class="headerlink" title="第四章、Audio and Video"></a>第四章、Audio and Video</h3><h4 id="4-2-1-浏览器支持性检测"><a href="#4-2-1-浏览器支持性检测" class="headerlink" title="4.2.1 浏览器支持性检测"></a>4.2.1 浏览器支持性检测</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"vide.webm"</span> <span class="attr">controls</span>&gt;</span></span><br><span class="line">  Your browser does not suport HTML5 video.</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="4-2-3-理解媒体元素"><a href="#4-2-3-理解媒体元素" class="headerlink" title="4.2.3 理解媒体元素"></a>4.2.3 理解媒体元素</h4><h5 id="4-2-3-3-媒体的控制"><a href="#4-2-3-3-媒体的控制" class="headerlink" title="4.2.3.3 媒体的控制"></a>4.2.3.3 媒体的控制</h5><p>如果内置的空间不适用用户界面的布局，那么可以借助javascript函数和特性</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>动作</th>
</tr>
</thead>
<tbody>
<tr>
<td>load()</td>
<td>加载为播放做准备</td>
</tr>
<tr>
<td>play()</td>
<td>加载并播放</td>
</tr>
<tr>
<td>pause()</td>
<td>暂停播放</td>
</tr>
<tr>
<td>canPlayType(type)</td>
<td>测试video元素是否支持给定的MIME类型的文件</td>
</tr>
</tbody>
</table>
<h3 id="第五章、Geolocation-API"><a href="#第五章、Geolocation-API" class="headerlink" title="第五章、Geolocation API"></a>第五章、Geolocation API</h3><h4 id="5-1-位置信息"><a href="#5-1-位置信息" class="headerlink" title="5.1 位置信息"></a>5.1 位置信息</h4><p>HTML5 Geolocation API不指定设备使用哪种底层技术来定位应用程序的用户，只是用于检索位置信息的API</p>
<h5 id="5-1-3-IP地址地理定位数据"><a href="#5-1-3-IP地址地理定位数据" class="headerlink" title="5.1.3 IP地址地理定位数据"></a>5.1.3 IP地址地理定位数据</h5><p>基于IP地址的地理定位的实现方式是：自动查找用户IP地址，然后检索其注册的物理地址</p>
<h5 id="5-1-4-GPS地理定位数据"><a href="#5-1-4-GPS地理定位数据" class="headerlink" title="5.1.4 GPS地理定位数据"></a>5.1.4 GPS地理定位数据</h5><p>GPS利用多个GPS卫星的信号实现，定位时间较长，不适合快速响应的应用程序</p>
<h5 id="5-1-5-WI-FI地理定位数据"><a href="#5-1-5-WI-FI地理定位数据" class="headerlink" title="5.1.5 WI-FI地理定位数据"></a>5.1.5 WI-FI地理定位数据</h5><p>基于WI-FI的地理定位信息是通过三角距离计算得出的，这个三角距离指的是用户当前位置到已知的多个wi-fi接入点的距离</p>
<h5 id="5-1-6-手机地理定位数据"><a href="#5-1-6-手机地理定位数据" class="headerlink" title="5.1.6 手机地理定位数据"></a>5.1.6 手机地理定位数据</h5><p>通过用户嗲一些基站的三角距离确定的，可提供相当准确的位置信息</p>
<h5 id="5-1-7-用户自定义的地理定位数据"><a href="#5-1-7-用户自定义的地理定位数据" class="headerlink" title="5.1.7 用户自定义的地理定位数据"></a>5.1.7 用户自定义的地理定位数据</h5><h4 id="5-4-使用HTML5-Geolocation-API"><a href="#5-4-使用HTML5-Geolocation-API" class="headerlink" title="5.4 使用HTML5 Geolocation API"></a>5.4 使用HTML5 Geolocation API</h4><p>执行HTML5 Geolocation的方式有很多，例如调用navigator.geolocation.getCurrentPosition()<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadDemo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(navigator.geolocation) &#123;</span><br><span class="line">      <span class="built_in">document</span>.getElementById(<span class="string">"status"</span>).innerHTML = <span class="string">"HTML5 Geolocation is supported in your browser."</span>;</span><br><span class="line">      navigator.geolocation.getCurrentPosition(updateLocation, handleLocationError,&#123;<span class="attr">timeout</span>:<span class="number">10000</span>&#125;);<span class="comment">//调用位置信息</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateLocation</span>(<span class="params">position</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> latitude = position.coords.latitude;  <span class="comment">//纬度</span></span><br><span class="line">  <span class="keyword">var</span> longitude = position.coords.longitude; <span class="comment">//经度</span></span><br><span class="line">  <span class="keyword">var</span> accuracy = position.coords.accuracy; <span class="comment">//准确度</span></span><br><span class="line">  <span class="keyword">var</span> timestamp = position.timestamp;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!latitude || !longitude) &#123;</span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">"status"</span>).innerHTML = </span><br><span class="line">    <span class="string">"HTML5 Geolocation is supported in your browser, but your location is currently not available."</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"latitude"</span>).innerHTML = <span class="string">"Latitude: "</span> + latitude;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"longitude"</span>).innerHTML = <span class="string">"Longitude: "</span> +  longitude;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"accuracy"</span>).innerHTML = <span class="string">"Accuracy: "</span> + accuracy + <span class="string">" meters"</span>;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"timestamp"</span>).innerHTML = <span class="string">"Timestamp: "</span> + timestamp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleLocationError</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"status"</span>).style.background = <span class="string">"papayaWhip"</span>;</span><br><span class="line">  <span class="keyword">switch</span>(error.code)&#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">    updateStatus(<span class="string">"There was an error while retrieving your location. Additional details: "</span> + error.message);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    updateStatus(<span class="string">"The user opted not to share his or her location."</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    updateStatus(<span class="string">"The browser was unable to determine your location. Additional details: "</span> + error.message);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">    updateStatus(<span class="string">"The browser timed out before retrieving the location."</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateStatus</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">"status"</span>).innerHTML = <span class="string">"&lt;strong&gt;Error&lt;/strong&gt;: "</span> + message;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="第六章、Communication-API"><a href="#第六章、Communication-API" class="headerlink" title="第六章、Communication API"></a>第六章、Communication API</h3><h4 id="6-1-跨文档消息通信"><a href="#6-1-跨文档消息通信" class="headerlink" title="6.1 跨文档消息通信"></a>6.1 跨文档消息通信</h4><p>跨文档消息通信可以确保iframe、标签页、窗口间安全的进行跨源通信<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">chatFrame.contentWindow.postMessage(<span class="string">"hello world"</span>,<span class="string">"http://www.example.com/"</span>);</span><br></pre></td></tr></table></figure></p>
<h5 id="6-1-3-使用postMessage-API"><a href="#6-1-3-使用postMessage-API" class="headerlink" title="6.1.3 使用postMessage API"></a>6.1.3 使用postMessage API</h5><ol>
<li>浏览器支持情况检测<pre>
if(typeof window.postMessage === "undefined"){
 //不支持postMessage
}
</pre></li>
<li>发送消息<pre>
window.postMessage("hello world","portal.example.com");
</pre></li>
<li>监听消息事件<pre>
window.onmessage = function(e){
 if(e.origin === ""){ //接收方可以接收特定源的消息
     console.log(e.data) //打印接收数据
 }
}
</pre>

</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- http:localhost/test/index.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"iframe"</span> <span class="attr">src</span>=<span class="string">"http://127.0.0.1/test/a.html"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> iframe = <span class="built_in">document</span>.getElementById(<span class="string">"iframe"</span>);</span></span><br><span class="line"><span class="actionscript">    iframe.contentWindow.postMessage(<span class="string">"null"</span>, <span class="string">"http://127.0.0.1/test/a.html"</span>);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(e.origin === <span class="string">"http://127.0.0.1/a.html"</span>)&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">document</span>.write(e.data);  <span class="comment">//123 这里获取到了a页面的dom内容</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- http://127.0.0.1/test/a.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"test"</span>&gt;</span>123<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">if</span>(e.origin === <span class="string">"http:localhost/test/index.html"</span>)&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> text = <span class="built_in">document</span>.getElementById(<span class="string">'test'</span>).innerHTML;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">//window.parent.postMessage()返回想要的数据</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">window</span>.parent.postMessage(text, <span class="string">"http://localhost/test/index.html"</span>);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="6-2-XMLHttpRequsest-Level-2"><a href="#6-2-XMLHttpRequsest-Level-2" class="headerlink" title="6.2 XMLHttpRequsest Level 2"></a>6.2 XMLHttpRequsest Level 2</h4><p>XMLHttpRequsest Level 2的功能改进主要体现在：</p>
<ul>
<li>跨源XMLHttpRequest;</li>
<li>进度事件(progress events)</li>
</ul>
<h5 id="6-2-1-跨源XMLHttpRequest"><a href="#6-2-1-跨源XMLHttpRequest" class="headerlink" title="6.2.1 跨源XMLHttpRequest"></a>6.2.1 跨源XMLHttpRequest</h5><p>XMLHttpRequsest Level 2通过CORS实现了跨源XMLHttpRequest<br>跨源XMLHttpRequest请求包括一个origin头部<br>服务器端需要为请求的内容添加”Access-Control-Allow-Origin:”头部</p>
<h5 id="6-2-2-进度事件"><a href="#6-2-2-进度事件" class="headerlink" title="6.2.2 进度事件"></a>6.2.2 进度事件</h5><p>利用进度事件实现文件上传率<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">xhr.onprogress = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> total = e.total;</span><br><span class="line">    <span class="keyword">var</span> loaded = e.loaded;</span><br><span class="line">    setProgress(radio + <span class="string">"% uploaded"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="第七章、WebSockets-API"><a href="#第七章、WebSockets-API" class="headerlink" title="第七章、WebSockets API"></a>第七章、WebSockets API</h3><p>WebSockets定义了双全工通信，大幅度减少了网络流量，并降低网络延迟 IE10+支持</p>
<h4 id="7-3-使用-Web-Sockets-API"><a href="#7-3-使用-Web-Sockets-API" class="headerlink" title="7.3 使用 Web Sockets API"></a>7.3 使用 Web Sockets API</h4><h5 id="7-3-2-基本用法"><a href="#7-3-2-基本用法" class="headerlink" title="7.3.2 基本用法"></a>7.3.2 基本用法</h5><p>为接受ws://loclahost:8080/echo上的链接，需要启动Python WebSocket服务器。<br>打开命令行窗口执行以下命令：<code>python websocket.py</code></p>
<ol>
<li>Web Socket对象的创建及其与Web Socket服务器的连接<pre>
url = "ws://localhost:8080/echo";
w = new WebSocket(url);    
</pre></li>
<li>添加事件监听器<pre>
w.onopen = function() { //建立连接触发open
 log("open");
 w.send("thank you for accepting this Web Socket request");
}
w.onmessage = function(e) { //收到消息触发message
 log(e.data.toString());
}
w.onclose = function(e) { //链接关闭触发close
 log("closed");
}
w.onerror = function(e) { //错误事件
 log("error");
}
</pre></li>
<li>发送消息<pre>
document.getElementById("sendButton").onclick = function() {
 w.send(document.getElementById("inputMessage").value);
}
</pre>

</li>
</ol>
<h3 id="第八章、Froms-API"><a href="#第八章、Froms-API" class="headerlink" title="第八章、Froms API"></a>第八章、Froms API</h3><h4 id="8-1-Froms-API概述"><a href="#8-1-Froms-API概述" class="headerlink" title="8.1 Froms API概述"></a>8.1 Froms API概述</h4><p>HTML5表单包含了大量的新的API和元素类型</p>
<ul>
<li>新的输入型控件</li>
<li>新的函数和特性</li>
</ul>
<h5 id="8-1-4-输入型控件"><a href="#8-1-4-输入型控件" class="headerlink" title="8.1.4 输入型控件"></a>8.1.4 输入型控件</h5><p><strong>email</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">"email"</span> name=<span class="string">"email"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>type=”email”的input输入类型用于表示语义上的e-mail地址输入域，在提交表单时，会自动验证 email 域的值。<br>[注意] IE9-浏览器及safari浏览器不支持</p>
<p><strong>tel</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">"tel"</span> placeholder=<span class="string">"请输入11位手机号码"</span> pattern=<span class="string">"\d&#123;11&#125;"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>type=”tel”的input输入类型用于表示语义上的电话输入域</p>
<p><strong>search</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">"search"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p><strong>url</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">"url"</span> /&gt;</span><br></pre></td></tr></table></figure></p>
<p>type=”url”的input输入类型用于表示语义上的url地址的输入域,在提交表单时，会自动验证 url 域的值。<br>[注意]IE9-浏览器及safari浏览器不支持</p>
<p><strong>number</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">min</span>=<span class="string">"0"</span> <span class="attr">max</span>=<span class="string">"10"</span> <span class="attr">step</span>=<span class="string">"0.5"</span> <span class="attr">value</span>=<span class="string">"6"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>type=”number”的input输入类型用于处理数字输入,step 规定合法的数字间隔<br>[注意]IE不支持该类型</p>
<p><strong>range</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">"range"</span> min=<span class="string">"0"</span> max=<span class="string">"10"</span> step=<span class="string">"0.5"</span> value=<span class="string">"6"</span>/&gt;</span><br></pre></td></tr></table></figure></p>
<p><input type="range" min="0" max="10" step="0.5" value="6"><br>type=”range”的input输入类型用于处理包含在一定范围内的数字输入<br>[注意]IE9-不支持该类型</p>
<p><strong>color</strong><br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;input type=<span class="string">"color"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>type=”color”的input输入类型会创建一个调色板用来选择颜色，颜色值以URL编码后的十六进制数值提交。<br>如黑色会以%23000000发送，其中%23是#的URL编码<br>[注意]safari和IE不支持该类型</p>
<p><strong>Date pickers</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"time"</span> <span class="attr">value</span>=<span class="string">"hh:mm:ss"</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"month"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><input type="time" value="hh:mm:ss.s"><input type="month"><br>[注意]IE和firefox这种日期类型都不支持，chrome不支持datetime类型</p>
<h5 id="8-2-1-新的表单特性和函数"><a href="#8-2-1-新的表单特性和函数" class="headerlink" title="8.2.1 新的表单特性和函数"></a>8.2.1 新的表单特性和函数</h5><p><strong>placeholder</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"tel"</span> <span class="attr">placeholder</span>=<span class="string">"请输入11位手机号码"</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>placeholder 属性提供可描述输入字段预期值的提示信息（hint）。该提示会在输入字段为空时显示，并会在字段获得焦点时消失。<br>[注意]placeholder 属性适用于以下的 <code>&lt;input&gt;</code>类型：text, search, url, tel, email 以及 password。</p>
<p><strong>autocomplete</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"demo_form.asp"</span> <span class="attr">method</span>=<span class="string">"get"</span> <span class="attr">autocomplete</span>=<span class="string">"on"</span>&gt;</span></span><br><span class="line">    Name:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"fname"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"email"</span> <span class="attr">autocomplete</span>=<span class="string">"off"</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><form action="demo_form.asp" method="get" autocomplete="on"><br>    Name:<input type="text" name="fname"><br><br>    E-mail: <input type="email" name="email" autocomplete="off"><br><br>    <input type="submit"><br></form><br>autocomplete 属性规定表单是否应该启用自动完成功能。<br>自动完成允许浏览器预测对字段的输入。当用户在字段开始键入时，浏览器基于之前键入过的值，应该显示出在字段中填写的选项。<br>[注意]autocomplete 属性适用于 <code>&lt;form&gt;</code>，以及下面的 <code>&lt;input&gt;</code> 类型：<br>text, search, url, tel, email, password, datepickers, range 以及 color。</p>
<p><strong>autofocus</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usr_name"</span> <span class="attr">autofocus</span>=<span class="string">"autofocus"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>每个页面上只允许出现一个autofocus特性<br>非type=”hidden”的input、select、textarea、button可使用autofocus元素来制定自动获得焦点的元素</p>
<p><strong>list、datalist</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"demo_form.asp"</span>&gt;</span></span><br><span class="line">    Webpage: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"url"</span> <span class="attr">list</span>=<span class="string">"url_list"</span> <span class="attr">name</span>=<span class="string">"link"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">datalist</span> <span class="attr">id</span>=<span class="string">"url_list"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">label</span>=<span class="string">"w3schools"</span> <span class="attr">value</span>=<span class="string">"http://www.w3schools.com"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">label</span>=<span class="string">"Google"</span> <span class="attr">value</span>=<span class="string">"http://www.google.com"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">label</span>=<span class="string">"Microsoft"</span> <span class="attr">value</span>=<span class="string">"http://www.microsoft.com"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">datalist</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><form action="demo_form.asp"><br>    Webpage: <input type="url" list="url_list" name="link"><br>    <datalist id="url_list"><br>        <option label="w3schools" value="http://www.w3schools.com"><br>        </option><option label="Google" value="http://www.google.com"><br>        </option><option label="Microsoft" value="http://www.microsoft.com"><br>    </option></datalist><br>    <input type="submit"><br></form><br>list 属性引用数据列表，其中包含输入字段的预定义选项。</p>
<p><strong>min、max</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">name</span>=<span class="string">"points"</span> <span class="attr">min</span>=<span class="string">"0"</span> <span class="attr">max</span>=<span class="string">"10"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>max 属性规定输入字段所允许的最大值 max 属性与 min 属性配合使用，可创建合法值范围<br>[注意]max 和 min 属性适用于以下 <code>&lt;input&gt;</code>类型：number, range, date, datetime, datetime-local, month, time 以及 week。</p>
<p><strong>required</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"usr_name"</span> <span class="attr">required</span>=<span class="string">"required"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>required 属性规定必需在提交之前填写输入字段。如果使用该属性，则字段是必填（或必选）的。<br>[注意]required 属性适用于以下 <code>&lt;input&gt;</code>类型：<br>text, search, url, tel, email, password, datepickers, number, checkbox, radio 以及 file。</p>
<p><strong>step</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">name</span>=<span class="string">"points"</span> <span class="attr">step</span>=<span class="string">"3"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>step 属性规定输入字段的合法数字间隔（假如 step=”3”，则合法数字应该是 -3、0、3、6，以此类推）。<br>[注意]step、max 以及 min 属性适用于以下 <code>&lt;input&gt;</code> 类型：number, range, date, datetime, datetime-local, month, time 以及 week。</p>
<p><strong>multiple</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">Select images: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">name</span>=<span class="string">"img"</span> <span class="attr">multiple</span>=<span class="string">"multiple"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>multiple 属性规定输入域中可选择多个值。<br>multiple 属性适用于以下类型的 <code>input</code> 标签：email 和 file。</p>
<p><strong>pattern</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"country_code"</span> <span class="attr">pattern</span>=<span class="string">"[a-z]&#123;3&#125;"</span> <span class="attr">title</span>=<span class="string">"Three letter country code"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>pattern 属性规定用于验证输入字段的正则表达式模式。<br>[注意]pattern 属性适用于以下 <code>&lt;input&gt;</code>类型：text, search, url, tel, email 以及 password 。</p>
<p><strong>novalidate</strong><br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"demo_form.asp"</span> <span class="attr">novalidate</span>=<span class="string">"novalidate"</span>&gt;</span></span><br><span class="line">    E-mail: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">name</span>=<span class="string">"user_email"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><form action="demo_form.asp" novalidate="novalidate"><br>    E-mail: <input type="email" name="user_email"><br>    <input type="submit"><br></form><br>novalidate 属性规定当提交表单时不对其进行验证。如果使用该属性，则表单不会验证表单的输入。<br>[注意]novalidate 属性适用于：<code>&lt;form&gt;</code>以及以下类型的 <code>&lt;input&gt;</code> 标签：<br>text, search, url, tel, email, password, datepickers, range 以及 color。</p>
<h3 id="第九章、Drag-and-drop"><a href="#第九章、Drag-and-drop" class="headerlink" title="第九章、Drag and drop"></a>第九章、Drag and drop</h3><h5 id="9-2-2-拖放事件流"><a href="#9-2-2-拖放事件流" class="headerlink" title="9.2.2 拖放事件流"></a>9.2.2 拖放事件流</h5><ul>
<li>dragstart 开始拖动页面中某元素时触发的事件<br>他是唯一一个支持datatransfer通过setData调用来设置数据的事件</li>
<li>drag 拖动操作中持续发生的事件</li>
<li>dragenter 拖动跨入了页面中的新元素时</li>
<li>dragleave 用户鼠标移出之前调用dragenter的元素时触发的事件</li>
<li>dragover 在拖动过程中移动到某元素之上时，会频繁的触发dragover事件</li>
<li>drop 用户释放鼠标时，drop事件会在当前鼠标停留的目标上调用</li>
<li>dragend 拖动完成时在拖动源上出发，指示拖动完成</li>
</ul>
<h5 id="9-2-3-设置元素可拖动"><a href="#9-2-3-设置元素可拖动" class="headerlink" title="9.2.3 设置元素可拖动"></a>9.2.3 设置元素可拖动</h5><p>为了标记特定元素为可拖动，要为其添加一个属性draggable</p>
<h3 id="第十章、Web-Workers-API"><a href="#第十章、Web-Workers-API" class="headerlink" title="第十章、Web Workers API"></a>第十章、Web Workers API</h3><p>web worker可以让web应用程序具备后台处理能力，可以充分利用多核cpu带来的优势。将耗时长的任务分配给web worker 可以避免弹出脚本运行缓慢的警告<br>web worker执行的脚本不能访问该页面的window对象</p>
<h5 id="10-2-2-创建web-worker"><a href="#10-2-2-创建web-worker" class="headerlink" title="10.2.2 创建web worker"></a>10.2.2 创建web worker</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* index.js */</span></span><br><span class="line"><span class="keyword">var</span> worker = <span class="keyword">new</span> Worker(<span class="string">"worker.js"</span>);</span><br><span class="line">worker.postMessage(<span class="string">"hello world!"</span>);</span><br><span class="line"></span><br><span class="line">worker.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.data);</span><br><span class="line">    <span class="comment">//终止worker</span></span><br><span class="line">    worker.terminate();</span><br><span class="line">&#125;;</span><br><span class="line">worker.onerror = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'Error:'</span> + e);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* worker.js */</span></span><br><span class="line">self.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    self.postMessage(<span class="string">'You said: '</span> + e.data);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="第十一章、Web-Storage-API"><a href="#第十一章、Web-Storage-API" class="headerlink" title="第十一章、Web Storage API"></a>第十一章、Web Storage API</h3><p>cookie的缺点：</p>
<ul>
<li>cookie大小受限</li>
<li>在网络上来回传送不安全，消耗带宽</li>
</ul>
<p>web storage适用于存储超出cookie大小限制的文档和文件数据</p>
<h5 id="11-3-2-设置和获取数据"><a href="#11-3-2-设置和获取数据" class="headerlink" title="11.3.2 设置和获取数据"></a>11.3.2 设置和获取数据</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//设置数据</span></span><br><span class="line">sesstionStorage.setItem(<span class="string">"firstKey"</span>,<span class="string">"firstValue"</span>);</span><br><span class="line">sesstionStorage.firstKey = <span class="string">"firstValue"</span>;</span><br><span class="line"><span class="comment">//保存对象</span></span><br><span class="line"><span class="keyword">var</span> data = &#123;<span class="attr">name</span>:<span class="string">"jesse"</span>&#125;;</span><br><span class="line">localStorage.setItem(<span class="string">"info"</span>,<span class="built_in">JSON</span>.stringify(data));</span><br><span class="line"><span class="comment">//获取数据</span></span><br><span class="line">sesstionStorage.getItem(<span class="string">"firstKey"</span>);</span><br><span class="line">sesstionStorage.firstKey;</span><br><span class="line"><span class="comment">//删除数据某项数据</span></span><br><span class="line">removeItem(key)</span><br><span class="line"><span class="comment">//清除所有数据</span></span><br><span class="line">clear()</span><br></pre></td></tr></table></figure>
<h5 id="11-3-4-sessionStorage和localStorage"><a href="#11-3-4-sessionStorage和localStorage" class="headerlink" title="11.3.4 sessionStorage和localStorage"></a>11.3.4 sessionStorage和localStorage</h5><table>
<thead>
<tr>
<th>sesstionStorage</th>
<th>localStorage</th>
</tr>
</thead>
<tbody>
<tr>
<td>浏览器窗口或标签页关闭时，数据被清除</td>
<td>数据永久保存，除非用户强制清除</td>
</tr>
<tr>
<td>数据只在构建他们的窗口或标签页内可见</td>
<td>数据可被同源的每个窗口或标签页共享</td>
</tr>
</tbody>
</table>
<h3 id="第十二章、构建离线web应用"><a href="#第十二章、构建离线web应用" class="headerlink" title="第十二章、构建离线web应用"></a>第十二章、构建离线web应用</h3><p>缓存清单文件中表示的资源构成了应用缓存(application cache),他是浏览器持久性存储资源的地方，通常在硬盘上  </p>
<h5 id="12-2-2-搭建简单的离线应用程序"><a href="#12-2-2-搭建简单的离线应用程序" class="headerlink" title="12.2.2 搭建简单的离线应用程序"></a>12.2.2 搭建简单的离线应用程序</h5><p>在html元素中加入manifest特性<br><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">manifest</span>=<span class="string">"application.appcache"</span>&gt;</span></span><br><span class="line">    //……</span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h5 id="12-2-3-支持离线行为"><a href="#12-2-3-支持离线行为" class="headerlink" title="12.2.3 支持离线行为"></a>12.2.3 支持离线行为</h5><p>navigator.onLine标明浏览器是否处于在线状态<br><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(navigator.onLine)&#123;</span><br><span class="line">    log(<span class="string">"online"</span>)</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    log(offline)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="12-2-4-manifest文件"><a href="#12-2-4-manifest文件" class="headerlink" title="12.2.4 manifest文件"></a>12.2.4 manifest文件</h5><p>离线应用程序包含一个manifest文件，此文件列出了浏览器为离线应用缓存的所有资源。manifest文件的MIME类型是text/cache-manifest<br>要配置Apache Http服务器，开发人员需要将下面一行代码添加到conf文件夹中的mime.types文件中<br><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">text</span>/cache-manifest appcache</span><br></pre></td></tr></table></figure></p>
<p>manifest文件示例<br><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line"><span class="comment">#要缓存的文件，无论程序是否在线都会从缓存中获取</span></span><br><span class="line"><span class="comment"># JavaScript</span></span><br><span class="line">./offline.js</span><br><span class="line">./log.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># stylesheets</span></span><br><span class="line">./html5.css</span><br><span class="line"></span><br><span class="line"><span class="comment"># images</span></span><br><span class="line">lake-tahoe.gif</span><br><span class="line"></span><br><span class="line">NETWORK</span><br><span class="line"><span class="comment"># 不缓存的</span></span><br><span class="line">signup.html</span><br><span class="line"></span><br><span class="line">FALLBACK</span><br><span class="line"><span class="comment"># 获取不到缓存资源时的备选资源路径</span></span><br><span class="line">signup.html  offline.html</span><br></pre></td></tr></table></figure></p>
<h5 id="12-2-6-运行中的应用缓存"><a href="#12-2-6-运行中的应用缓存" class="headerlink" title="12.2.6 运行中的应用缓存"></a>12.2.6 运行中的应用缓存</h5><p>浏览器在应用缓存中成功的缓存了应用资源后，他总会优先从缓存汇总获取资源，之后在检查服务器上的manifest文件后被修改过</p>
</div><div class="common-bottom"><p>如需转载请保留此段声明</p><p>作者：<a href="/about/">Jesse</a></p><p>出处：<a href="/">http://www.jesse131.cn</a></p><p>如果您对本文有什么疑问，欢迎提出评论，您的建议是我写优质文章的动力。</p></div><div class="tags"><a href="/tags/html/">HTML</a></div><div class="post-share"><!-- baidu分享--><div class="bdsharebuttonbox"><span style="float:left;line-height: 28px;height: 28px;font-size:16px;font-weight:blod">分享到：</span><a href="#" data-cmd="weixin" title="分享到微信" class="bds_weixin"></a><a href="#" data-cmd="tsina" title="分享到新浪微博" class="bds_tsina"></a><a href="#" data-cmd="qzone" title="分享到QQ空间" class="bds_qzone"></a><a href="#" data-cmd="youdao" title="分享到有道云笔记" class="bds_youdao"></a><a href="#" data-cmd="evernotecn" title="分享到印象笔记" class="bds_evernotecn"></a><a href="#" data-cmd="more" class="bds_more"></a></div><script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdPic":"","bdStyle":"0","bdSize":"16"},"share":{}};
with(document)0[body.appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
</script></div><div class="post-nav"><a href="/articles/notes/graphic-http.html" class="pre">《图解HTTP》--读书笔记</a><a href="/articles/notes/professional-javascript-for-web-developers-3rd-edition.html" class="next">《Javascript高级程序设计》第三版--读书笔记</a></div><div id="comments"><link type="text/css" rel="stylesheet" href="//imsun.github.io/gitment/style/default.css"><div id="gitment-ctn"> </div></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#第一章、HTML5概述"><span class="toc-text">第一章、HTML5概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-6-HTML5的新功能"><span class="toc-text">1.6 HTML5的新功能</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-6-1-新的DOCTYPE和字符集"><span class="toc-text">1.6.1 新的DOCTYPE和字符集</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-6-2-新元素和旧元素"><span class="toc-text">1.6.2 新元素和旧元素</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-6-4-使用Selectors-API简化选取操作"><span class="toc-text">1.6.4 使用Selectors API简化选取操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第二章、Canvas-API"><span class="toc-text">第二章、Canvas API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-使用HTML5-Canvas-API"><span class="toc-text">2.2 使用HTML5 Canvas API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-检测浏览器支持情况"><span class="toc-text">2.2.1 检测浏览器支持情况</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-在页面中加入canvas"><span class="toc-text">2.2.2 在页面中加入canvas</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-3-偏移"><span class="toc-text">2.2.3 偏移</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-4-路径"><span class="toc-text">2.2.4 路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-5-描边样式"><span class="toc-text">2.2.5 描边样式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-6-填充样式"><span class="toc-text">2.2.6 填充样式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-7-绘制曲线"><span class="toc-text">2.2.7 绘制曲线</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-9-在canvas中插入图片"><span class="toc-text">2.2.9 在canvas中插入图片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-10-渐变"><span class="toc-text">2.2.10 渐变</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-11-使用图案样式"><span class="toc-text">2.2.11 使用图案样式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-12-缩放"><span class="toc-text">2.2.12 缩放</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-13-旋转"><span class="toc-text">2.2.13 旋转</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-14-文本"><span class="toc-text">2.2.14 文本</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-15-阴影"><span class="toc-text">2.2.15 阴影</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第三章、SVG"><span class="toc-text">第三章、SVG</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-5-在页面中添加SVG"><span class="toc-text">3.1.5 在页面中添加SVG</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-7-变换SVG元素"><span class="toc-text">3.1.7 变换SVG元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-8-复用内容"><span class="toc-text">3.1.8 复用内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-9-图案和渐变"><span class="toc-text">3.1.9 图案和渐变</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-10-SVG路径"><span class="toc-text">3.1.10 SVG路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-11-使用SVG文本"><span class="toc-text">3.1.11 使用SVG文本</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第四章、Audio-and-Video"><span class="toc-text">第四章、Audio and Video</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-浏览器支持性检测"><span class="toc-text">4.2.1 浏览器支持性检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-理解媒体元素"><span class="toc-text">4.2.3 理解媒体元素</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-3-3-媒体的控制"><span class="toc-text">4.2.3.3 媒体的控制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第五章、Geolocation-API"><span class="toc-text">第五章、Geolocation API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-位置信息"><span class="toc-text">5.1 位置信息</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-3-IP地址地理定位数据"><span class="toc-text">5.1.3 IP地址地理定位数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-4-GPS地理定位数据"><span class="toc-text">5.1.4 GPS地理定位数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-5-WI-FI地理定位数据"><span class="toc-text">5.1.5 WI-FI地理定位数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-6-手机地理定位数据"><span class="toc-text">5.1.6 手机地理定位数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-7-用户自定义的地理定位数据"><span class="toc-text">5.1.7 用户自定义的地理定位数据</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-4-使用HTML5-Geolocation-API"><span class="toc-text">5.4 使用HTML5 Geolocation API</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第六章、Communication-API"><span class="toc-text">第六章、Communication API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-跨文档消息通信"><span class="toc-text">6.1 跨文档消息通信</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-3-使用postMessage-API"><span class="toc-text">6.1.3 使用postMessage API</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-XMLHttpRequsest-Level-2"><span class="toc-text">6.2 XMLHttpRequsest Level 2</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-1-跨源XMLHttpRequest"><span class="toc-text">6.2.1 跨源XMLHttpRequest</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-进度事件"><span class="toc-text">6.2.2 进度事件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第七章、WebSockets-API"><span class="toc-text">第七章、WebSockets API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-使用-Web-Sockets-API"><span class="toc-text">7.3 使用 Web Sockets API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-3-2-基本用法"><span class="toc-text">7.3.2 基本用法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第八章、Froms-API"><span class="toc-text">第八章、Froms API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-Froms-API概述"><span class="toc-text">8.1 Froms API概述</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#8-1-4-输入型控件"><span class="toc-text">8.1.4 输入型控件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#8-2-1-新的表单特性和函数"><span class="toc-text">8.2.1 新的表单特性和函数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第九章、Drag-and-drop"><span class="toc-text">第九章、Drag and drop</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2-2-拖放事件流"><span class="toc-text">9.2.2 拖放事件流</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2-3-设置元素可拖动"><span class="toc-text">9.2.3 设置元素可拖动</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第十章、Web-Workers-API"><span class="toc-text">第十章、Web Workers API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#10-2-2-创建web-worker"><span class="toc-text">10.2.2 创建web worker</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第十一章、Web-Storage-API"><span class="toc-text">第十一章、Web Storage API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#11-3-2-设置和获取数据"><span class="toc-text">11.3.2 设置和获取数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#11-3-4-sessionStorage和localStorage"><span class="toc-text">11.3.4 sessionStorage和localStorage</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第十二章、构建离线web应用"><span class="toc-text">第十二章、构建离线web应用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#12-2-2-搭建简单的离线应用程序"><span class="toc-text">12.2.2 搭建简单的离线应用程序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-2-3-支持离线行为"><span class="toc-text">12.2.3 支持离线行为</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-2-4-manifest文件"><span class="toc-text">12.2.4 manifest文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#12-2-6-运行中的应用缓存"><span class="toc-text">12.2.6 运行中的应用缓存</span></a></li></ol></li></ol></li></ol></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/articles/tool/the-usual-command-line-of-line-of-vim.html">工作中常用到的Vim命令</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/html-css/make-a-thorough-inquiry-about-css-vertical-align.html">Vertical-Align属性探究</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/php/Yii-study-notes.html">Yii1.1.16学习记录</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/mobile/mobile-webpages-commonly-used-header-tags.html">移动端Web页面开发常用的头部标签设置</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/tool/the-usual-git-command.html">常用的Git命令整理</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/html-css/summary-of-various-length-unit-in-css.html">CSS中各种长度单位总结</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/javascript/the-different-between-innerHTML-innerText-and-textContent.html">innerHTML,innerText,textContent的区别详解</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/javascript/对JavaScript中this的理解.html">对JavaScript中this的理解</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/tool/set-up-my-front-end-build-tool-webpack.html">搭建自己的Webpack前端构建工具</a></li><li class="post-list-item"><a class="post-list-link" href="/articles/notes/performance-best-practices-for-web-developer.html">《高性能网站建设进阶指南》--读书笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bootstrap/">Bootstrap</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/html-css/">HTML-CSS</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">JavaScript</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/php/">PHP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/photoshop/">Photoshop</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">WEB</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webserver/">WEB服务器</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jquery/">jQuery</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">前端工具</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/translation/">前端翻译</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mobile/">移动端开发</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/notes/">读书笔记</a><span class="category-list-count">13</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/photoshop/" style="font-size: 15px;">Photoshop</a> <a href="/tags/bootstrap/" style="font-size: 15px;">Bootstrap</a> <a href="/tags/html/" style="font-size: 15px;">HTML</a> <a href="/tags/javascript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/mobile/" style="font-size: 15px;">Mobile</a> <a href="/tags/jquery/" style="font-size: 15px;">jQuery</a> <a href="/tags/http/" style="font-size: 15px;">HTTP</a> <a href="/tags/web/" style="font-size: 15px;">WEB</a> <a href="/tags/angularjs/" style="font-size: 15px;">AngularJs</a> <a href="/tags/css/" style="font-size: 15px;">CSS</a> <a href="/tags/php/" style="font-size: 15px;">PHP</a> <a href="/tags/yii/" style="font-size: 15px;">Yii</a> <a href="/tags/gulp/" style="font-size: 15px;">Gulp</a> <a href="/tags/webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/vim/" style="font-size: 15px;">Vim</a> <a href="/tags/git/" style="font-size: 15px;">Git</a> <a href="/tags/sublimetext3/" style="font-size: 15px;">SublimeText3</a> <a href="/tags/apache/" style="font-size: 15px;">Apache</a> <a href="/tags/mysql/" style="font-size: 15px;">MySQL</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">三月 2016</a><span class="archive-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul><li><a href="http://javascript.ruanyifeng.com/" title="JavaScript 标准参考教程" target="_blank">JavaScript 标准参考教程</a></li><li><a href="http://www.cnblogs.com/lyzg/" title="流云诸葛" target="_blank">流云诸葛</a></li><li><a href="http://www.cnblogs.com/TomXu/archive/2011/12/15/2288411.html" title="深入理解JavaScript系列" target="_blank">深入理解JavaScript系列</a></li><li><a href="http://caibaojian.com/page/2" title="前端开发博客" target="_blank">前端开发博客</a></li><li><a href="http://www.cnblogs.com/jesse131/" title="前端开发之路" target="_blank">前端开发之路</a></li></ul></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><span> Copyright &copy 2016-2017 <a href="//about/" rel="nofollow">Jesse.</a></span></p><p><span>Total visits：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i></span><span> Theme by  <a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Powered by  <a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><!-- 百度统计--><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?467c30f9f602c453fb62d79e98d80329";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.appendChild(hm);
  })();
</script><!-- 百度内容推送--><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https'){
   bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else{
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.appendChild(bp);
})();

</script><script type="text/javascript" src="/js/bundle.js"></script><!--gitment--><script src="//imsun.github.io/gitment/dist/gitment.browser.js"></script><script>var gitment = new Gitment({
  //- id: window.location.href,
  owner: 'Jesse121',
  repo: 'http://www.jesse131.cn',
  oauth: {
    client_id: '1d84813ae13cd94072f0',
    client_secret: 'e0a20bd0498c8eb5eb6145c9802b47597d35f35a',
  },
})
gitment.render('gitment-ctn')</script></body></html>